name: Deployment pipeline

on:
  push:
    branches:
      - master
      # note that your "main" branch might be called main instead of master
jobs:
  simple_deployment_pipeline:
    runs-on: ubuntu-20.04
    defaults:
      run:
        working-directory: ./fullstackopen-cicd/
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 16
      - name: check ls
        run: ls
      - name: instal package
        run: npm install
      - name: eslint
        run: npm run eslint
      - name: build
        run: npm run build
      - name: test
        run: npm run test
      - name: e2e tests
        uses: cypress-io/github-action@v5
        command: npm run test:e2e
        start: npm run start-prod
        wait-on: https://localhost:5000








# name: Deployment pipeline

# on:
#   push:
#     branches:
#       - master
#       # note that your "main" branch might be called main instead of master
# jobs:
#   simple_deployment_pipeline:
#     runs-on: ubuntu-20.04
#     defaults:
#       run:
#         working-directory: ./fullstackopen-cicd/
#     steps:
#       - uses: actions/checkout@v3
#       - uses: oven-sh/setup-bun@v1
#       - name: check ls
#         run: ls
#       - name: instal package
#         run: bun install
#       - name: eslint
#         run: bun run eslint
#       - name: build
#         run: bun run build
#       - name: test
#         run: bun run test
#       - name: e2e tests
#         uses: cypress-io/github-action@v5
#         with: 
#           command: bun run test:e2e
#           start: bun run start-prod
#           wait-on: https://localhost:5000